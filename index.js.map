{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\"\n\nconst BASE_URL = 'https://pixabay.com/api/' //pixabay читаем библиотеку\n\nconst API_KEY = '45071357-999033ebbf151b40dc2c05ece'\n\naxios.defaults.baseURL = BASE_URL;\n\nfunction getImages({ page = 1, per_page = 20, q = 'image'} = {\n  page: 1,\n  per_page: 15,\n  q: 'image'\n}){\n  return axios \n  .get('', {\n    params:{\n      page,\n      per_page,\n      q,\n      key: API_KEY\n    }\n \n  }). then(({ data }) => {\n    return {\n      images: data.hits, // Изображения находятся в поле \"hits\"\n      totalResult: data.totalHits // Общее количество результатов\n    };\n  }).catch(error => {\n    console.error('Ошибка при получении изображений:', error.message);\n    throw error; // Перебрасываем ошибку, чтобы можно было обработать ее в вызывающем коде\n  });\n}\n\nexport {getImages}\n\n\n\n\n\n// export function fetchImages(query){ // фетч на запрос на сервер\n\n//     return fetch(`${URL}?key=${API_KEY}&q=${query}&image-type=photo&orientation=horizontal&safesearch=true`) //линк на бекенд, читаем библиотеку\n//     .then((response) => {\n//         if (!response.ok) {\n//           throw new Error('Sorry, there are no images matching your search query. Please try again!');\n//         }\n//         return response.json();\n//       });\n//   }\n  ","export function showLoader(loader){\n    loader.style.display = 'block';\n}\n\nexport function hideLoader(loader){\n    loader.style.display = 'none';\n}\n\nexport function createImages(images) { //функция создания галлереи\n    \n    return images.map(image => {\n    return `<li class = 'gallery-item'>\n      <a class='gallery-link' href='${image.webformatURL}'>\n      <img\n        class='gallery-image'\n        src=${image.webformatURL}\n        data-source='${image.largeImageURL}'\n        alt='${image.tags}'\n        />\n      </a>\n      <ul>\n      <li>\n      <h3>Likes</h3>\n      <p>${image.likes}</p>\n      </li>\n      <li>\n      <h3>Views</h3>\n      <p>${image.views}</p>\n      </li>\n      <li>\n      <h3>Comments</h3>\n      <p>${image.comments}</p>\n      </li>\n      <li>\n      <h3>Downloads</h3>\n      <p>${image.downloads}</p>\n      </li>\n      </ul>\n      </li>\n  `\n    }).join(\"\")\n  }","console.log('Hello world')\n\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { getImages } from \"./js/pixabay-api\";\nimport { showLoader, hideLoader, createImages } from \"./js/render-functions\";\n\nconst form = document.querySelector('.form')\nconst input = document.getElementById('input')\n\nconst gallery = document.querySelector('.gallery')\nconst btnLoadMore = document.querySelector('.btn')\n\nform.addEventListener('submit', handleSearch)\n\n\nclass ButtonService { // класс управления состояния кнопкой\n  constructor(buttonEL, hiddenClass) {\n    this.buttonEL = buttonEL;\n    this.hiddenClass = hiddenClass;\n  }\n\n  hide() {\n    this.buttonEL.classList.add(this.hiddenClass);\n  }\n\n  show() {\n    this.buttonEL.classList.remove(this.hiddenClass);\n  }\n\n  disable() {\n    this.buttonEL.disabled = true;\n  }\n\n  enable() {\n    this.buttonEL.disabled = false;\n  }\n}\n\nconst loadMoreBtn = new ButtonService(btnLoadMore, 'is-hidden')\n\nloadMoreBtn.hide()\n\nconst params = {\n  page: 1,\n  per_page: 20,\n  q:'',\n  maxPage: 0,\n}\n\n\nasync function handleSearch(event){\n  event.preventDefault();\n  gallery.innerHTML = '';\n\n  const formCurrent = event.currentTarget;\n  params.q = formCurrent.elements.query.value.trim()\n\n  if(params.q === ''){\n    iziToast.warning({\n      title: 'Увага',\n      message: 'Введіть запит',\n    });\n    formCurrent.reset()\n    return\n  }\n  loadMoreBtn.show()\n  loadMoreBtn.disable()\n\n    params.page = 1\n\n    try {\n\n\n      \n      const { images, totalResult } = await getImages();\n      params.maxPage = Math.ceil(totalResult / params.per_page);\n      gallery.innerHTML += createImages(images);\n      \n      if (params.maxPage > 1) {\n        loadMoreBtn.enable();\n        btnLoadMore.addEventListener('click', handleLoadMore);\n      } else {\n        loadMoreBtn.hide();\n      }\n    } catch (err) {\n      console.error(`Помилка під час запиту: ${err.message}`);\n    } finally {\n      formCurrent.reset()\n    }\n  }\n\n  async function handleLoadMore() {\n    loadMoreBtn.disable();\n    params.page += 1\n\n    try {\n      const {images} = await getImages(params);\n\n      gallery.innerHTML = createImages(images);\n\n    }catch (err) {\n      iziToast.warning({\n        title: 'Увага',\n        message: `Помилка під час запиту: ${err.message}`\n      });\n\n    \n    } finally {\n      if(params.page === params.maxPage){\n        loadMoreBtn.hide();\n        loadMoreBtn.removeEventListener('click', handleLoadMore)\n      } else {\n        loadMoreBtn.enable()\n      }\n    }\n  } \n\n"],"names":["BASE_URL","API_KEY","axios","getImages","page","per_page","q","data","error","createImages","images","image","form","gallery","btnLoadMore","handleSearch","ButtonService","buttonEL","hiddenClass","loadMoreBtn","params","event","formCurrent","iziToast","totalResult","handleLoadMore","err"],"mappings":"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"}